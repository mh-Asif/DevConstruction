@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = null;
}
<!-- Dropzone CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.css" rel="stylesheet" />


<html>
    <head>Testing</head>
    <body>
        <div>
   @*      <form action="/Project/Upload" method="post" enctype="multipart/form-data" class="dropzone dz-clickable form-horizontal form-bordered" id="dropzoneForm">
            <div class="form-group form-actions">
                <div class="col-md-9 col-md-offset-4">
                    <button type="submit" class="btn btn-sm btn-primary"><i class="fa fa-floppy-o"></i> Upload</button>
                </div>
            </div>
        </form> *@



        <form class="dropzone" id="my-dropzone">
            @Html.AntiForgeryToken()

            <button type="button" id="btnSubmit" class="btn btn-sm btn-primary"><i class="fa fa-floppy-o"></i> Upload</button>
        </form>
        </div>
  
    </body>
</html>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
@* <script src="https://unpkg.com/dropzone@6.0.0-beta.1/dist/dropzone-min.js"></script>
<link href="https://unpkg.com/dropzone@6.0.0-beta.1/dist/dropzone.css" rel="stylesheet" type="text/css" /> *@
<!-- Dropzone JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.js"></script>
@*
<script>
    Dropzone.options.myDropzone = {
        paramName: "files",
        maxFilesize: 10, // MB
        uploadMultiple: true,
        parallelUploads: 10,
        acceptedFiles: ".jpg,.png,.pdf,.docx",
        addRemoveLinks: true,
        init: function () {
            this.on("sending", function (file, xhr, formData) {
                var token = document.querySelector('input[name="__RequestVerificationToken"]').value;
                xhr.setRequestHeader("RequestVerificationToken", token);
            });
        }
    };
</script> *@

<script>
    $(function () {
      //  Dropzone.autoProcessQueue = false;
        // Dropzone.options.dropzoneForm = {
        //     paramName: "inputFiles", // The name that will be used to transfer the file
        //    autoProcessQueue: false,
        //     uploadMultiple: true,
        //     parallelUploads: 100,
        //     accept: function (file, done) {
        //         done();
        //     }
        // };

        var myDropzone = new Dropzone("#my-dropzone", {
            url: "/Project/upload",
            autoProcessQueue: false,
            paramName: "files",
            uploadMultiple: true,
            parallelUploads: 100,
            accept: function (file, done) {
                done();
            }
        });

        document.querySelector("#btnSubmit").addEventListener("click", function () {
            myDropzone.processQueue(); // <-- This triggers upload manually
        });
    });
</script>
