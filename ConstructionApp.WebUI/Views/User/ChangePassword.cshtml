@model Construction.Infrastructure.Models.UsersMasterDTO
@{
}
<div class="page-content-section">
    <!-- Content wrapper -->
    <div class="container-fluid">
        <!-- Content -->

        <div class="flex-grow-1 container-p-y">
            <!-- Header -->
            <div class="row">
                <div class="col-12">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h4 class="card-title mb-0">
                                <i class="ti ti-lock ti-lg me-2"></i>Change Password
                            </h4>
                            <p class="text-muted mb-0">Update your account password to keep your account secure</p>
                        </div>
                        <div class="card-body">
                            <form id="changePasswordForm" method="post" action="/User/ChangePassword">
                                <!-- Current Password -->
                                <div class="row mb-4">
                                    <div class="col-lg-2 col-md-3 col-sm-4">
                                        <label for="currentPassword" class="form-label">Current Password <span class="text-danger">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="input-group input-group-merge">
                                            <span class="input-group-text"><i class="ti ti-lock"></i></span>
                                            <input type="password"
                                                   id="LoginPassword" name="LoginPassword"
                                                   class="form-control"
                                                   placeholder="Enter current password"
                                                   required />
                                            <span class="input-group-text cursor-pointer"><i class="ti ti-eye"></i></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- New Password -->
                                <div class="row mb-4">
                                    <div class="col-lg-2 col-md-3 col-sm-4">
                                        <label for="newPassword" class="form-label">New Password <span class="text-danger">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="input-group input-group-merge">
                                            <span class="input-group-text"><i class="ti ti-lock"></i></span>
                                            <input type="password"
                                                   id="Password" name="Password"
                                                   class="form-control"
                                                   placeholder="Enter new password"
                                                   required />
                                            <span class="input-group-text cursor-pointer"><i class="ti ti-eye"></i></span>
                                        </div>
                                      @*   <div class="form-text">
                                            Password must be at least 8 characters long and contain uppercase, lowercase, number and special character
                                        </div> *@
                                    </div>
                                </div>

                                <!-- Confirm New Password -->
                                <div class="row mb-4">
                                    <div class="col-lg-2 col-md-3 col-sm-4">
                                        <label for="confirmPassword" class="form-label">Confirm New Password <span class="text-danger">*</span></label>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="input-group input-group-merge">
                                            <span class="input-group-text"><i class="ti ti-lock"></i></span>
                                            <input type="password"
                                                   id="ConfirmPassword"
                                                   name="ConfirmPassword"
                                                   class="form-control"
                                                   placeholder="Confirm new password"
                                                   required />
                                            <span class="input-group-text cursor-pointer"><i class="ti ti-eye"></i></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="row">
                                    <div class="col-md-10">
                                        <div class="d-flex justify-content-end gap-3">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="ti ti-check me-2"></i>Update Password
                                            </button>
                                            @*  <button type="reset" class="btn btn-outline-secondary">
                                            <i class="ti ti-refresh me-2"></i>Reset
                                            </button> *@
                                            <a href="#" class="btn btn-outline-danger">
                                                <i class="ti ti-x me-2"></i>Cancel
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!--/ Header -->
            <!-- Security Tips -->
            <div class="row mt-4">
                <div class="col-lg-12 col-md-10">
                    <div class="card bg-light-primary border-primary">
                        <div class="card-body">
                            <div class="d-flex align-items-start">
                                <div class="flex-shrink-0">
                                    <i class="ti ti-shield-check ti-lg text-primary"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6 class="card-title text-primary mb-2">Security Tips</h6>
                                    <ul class="list-unstyled mb-0">
                                        <li class="mb-1">• Never share your password with anyone</li>
                                        <li class="mb-1">• Use a unique password for each account</li>
                                        <li class="mb-1">• Avoid using personal information in your password</li>
                                        <li class="mb-1">• Consider using a password manager</li>
                                        <li>• Change your password regularly</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--/ Security Tips -->
        </div>
        <!-- / Content -->

    </div>
    <!-- Content wrapper -->
</div>
@section scripts {
    <script type="text/javascript">
        $(document).ready(function () {


            if ("@Model.DisplayMessage.Equals(string.Empty)" == "False") {

                Swal.fire({
                    title: 'Message',
                    text: "@Model.DisplayMessage",
                    icon: 'success',
                    confirmButtonText: 'OK!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        if ("@Model.HttpStatusCode" == 200) {// Redirect to the home page if the password change was successful
                            window.location.href = "/Home/Index";

                        }
                    }
                });

            }
        });



    </script>

     <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Password visibility toggle functionality
        const eyeIcons = document.querySelectorAll('.input-group-text .ti-eye');
        
        eyeIcons.forEach(icon => {
          icon.addEventListener('click', function() {
            const input = this.closest('.input-group').querySelector('input');
            const icon = this;
            
            if (input.type === 'password') {
              input.type = 'text';
              icon.classList.remove('ti-eye');
              icon.classList.add('ti-eye-off');
            } else {
              input.type = 'password';
              icon.classList.remove('ti-eye-off');
              icon.classList.add('ti-eye');
            }
          });
        });

        // Reset button functionality
       
       
        
     

        // Notification function
       
      });
    </script>
}

